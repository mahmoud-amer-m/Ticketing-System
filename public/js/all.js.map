{"version":3,"sources":["/resources/assets/js/all.js","/resources/assets/js/all.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["\n/**\n * First we will load all of this project's JavaScript dependencies which\n * include Vue and Vue Resource. This gives a great starting point for\n * building robust, powerful web applications using Vue and Laravel.\n */\n\nrequire('./bootstrap');\n\n/**\n * Next, we will create a fresh Vue application instance and attach it to\n * the page. Then, you may begin adding components to this application\n * or customize the JavaScript scaffolding to fit your unique needs.\n */\n\nVue.component('example', require('./components/Example.vue'));\n\nconst app = new Vue({\n    el: '#app'\n});\n","//var $ = require('jquery');\n//require('fancybox')($); \n \nvar selectedTickets = [];\nvar selectedNotifications = [];\nfunction doSomething(value) {\n//    alert(2);\n        $('#overlay').fadeIn();\n        var url = $(\"#buildings_url\").val() + \"/getBuildings/\" + value; // the script where you handle the form input.\n        console.log(url);\n        $.ajax({\n            type: \"GET\",\n            url: url,\n            success: function (json)\n            {\n                console.log(json);\n                $('#building').html(\"\");\n                var buildings = json[\"buildings\"];\n                $.each(buildings, function (i, value) {\n                    console.log(value);\n                    $('#building').append($('<option>').text(value[\"building_name\"]).attr('value', value[\"building_id\"]));\n                });\n                \n                \n            }\n        });\n    };\n$('document').ready(function () {\n    $('body').on('click', '#print_ticket_href', function (e) {\n        e.stopPropagation();\n        event.preventDefault();\n        setTimeout(function () { // wait until all resources loaded\n            $('#page').print();\n        }, 250);\n    });\n//    $('.fancybox').fancybox();\n\n    $('body').on('click', '.clickable_tr', function (e) {\n        e.preventDefault();\n        redirect_url = $(this).data(\"href\");\n        window.location.href = redirect_url;\n    });\n    $('body').on('mouseover', '.clickable_tr', function (e) {\n        $(this).css('cursor', 'pointer');\n        $(this).addClass(\"tickets_table_row_hover\");\n    }).on('mouseout', '.clickable_tr', function (e) {\n        $(this).css('cursor', 'none');\n        $(this).removeClass(\"tickets_table_row_hover\");\n    });\n    $('body').on('mouseover', '.notifications_row', function (e) {\n        $(this).css('cursor', 'pointer');\n        $(this).addClass(\"tickets_table_row_hover\");\n    }).on('mouseout', '.notifications_row', function (e) {\n        $(this).css('cursor', 'none');\n        $(this).removeClass(\"tickets_table_row_hover\");\n    });\n    $('body').on('submit', '#change_password_form', function (e) {\n        e.preventDefault();\n        $('#overlay').show();\n        var url = $(\"#url\").val();\n//        $(\"#overlay\").css(\"height\", $(\".col-xs-12\").height());\n        if ($(\"#password\").val() == $(\"#confirm_password\").val()) {\n            $.ajax({\n                type: \"POST\",\n                url: url,\n                data: $(\"#change_password_form\").serialize(),\n                success: function (data)\n                {\n                    if (data) {\n                        alert(\"تم تغيير كلمة المرور بنجاح\");\n                        window.location.replace($(\"#redirect_url\").val());\n                    } else if (data = \"confirmation-false\") {\n                        alert(\"برجاء إدخال التأكيد الصحيح لكلمة المرور\");\n                    }\n                    $('#overlay').hide();\n//                    $(\"#change_password_form\").load(location.href + \" #change_password_form\");\n                }\n            });\n        } else {\n            $('#overlay').hide();\n            alert(\"برجاء إدخال التأكيد الصحيح لكلمة المرور\");\n        }\n    });\n    $('body').on('click', '.action_only', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        title = $(this).data(\"title\");\n        var confirmed = confirm(\"هل تريد فعلا حذف الطلب - \" + title);\n        if (confirmed == true) {\n            $(\"#ajax_container\").hide();\n            $('#overlay').show();\n            var that = this;\n            url = $(this).data(\"href\");\n            redirect_url = $(this).data(\"redirect\");\n            tID = $(this).data(\"tid\");\n            $.post(url, {ticketID: tID},\n                    function (returnedData) {\n                        $.ajax({\n                            context: this,\n                            type: \"GET\",\n                            url: redirect_url,\n                            success: function (data)\n                            {\n\n                                $(\".filter_list\").removeClass(\"bordered-segment\");\n                                $(\"#ajax_container\").html(data);\n                                $('#overlay').hide();\n                                $(that).addClass(\"bordered-segment\");\n                                $(\"#ajax_container\").fadeIn();\n                            }\n                        });\n                    });\n        } else {\n\n        }\n    });\n    $('body').on('click', '.filter_list', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        $(document).prop('title', $(this).attr(\"title\"));\n        $(\"#ajax_container\").hide();\n        $('#overlay').show();\n        var that = this;\n        url = $(this).data(\"url\");\n        segment = $(this).data(\"segment\");\n        $.ajax({\n            context: this,\n            type: \"GET\",\n            url: url,\n            success: function (data)\n            {\n                $(\".filter_list\").removeClass(\"bordered-segment\");\n                $(\"#ajax_container\").html(data);\n                $('#overlay').hide();\n                $(that).addClass(\"bordered-segment\");\n                $(\"#ajax_container\").fadeIn();\n            }\n        });\n    });\n    $('body').on('click', '.emp_filter_list', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        $(document).prop('title', $(this).attr(\"title\"));\n\n        $(\"#ajax_container\").hide();\n        var that = this;\n        $('#overlay').show();\n        url = $(this).data(\"url\");\n        $.ajax({\n            type: \"GET\",\n            url: url,\n            success: function (data)\n            {\n                $(\"#add_ticket_link\").removeClass(\"bordered-segment\");\n                $(\".emp_filter_list\").removeClass(\"bordered-segment\");\n                $('#overlay').hide();\n                $(that).addClass(\"bordered-segment\");\n                $(\"#ajax_container\").html(data);\n                $(\"#ajax_container\").fadeIn();\n            }\n        });\n        notifications_url = $(\"#hiddenURLNewNotifications\").val();\n        $.ajax({\n            type: \"GET\",\n            url: notifications_url,\n            success: function (data)\n            {\n            }\n        });\n    });\n//    $(\"body\").on(\"click\", \".pagination a\", function (e) {\n//        e.preventDefault();\n//        $(\"#ajax_container\").hide();\n//        $(\"#overlay p\").css(\"top\", '50%');\n//        url = $(\"#hiddenURL\").val();\n//        $('#overlay').show();\n//        var page = $(this).attr(\"data-page\"); //get page number from link\n//        $(\"#ajax_container\").load(url, {\"page\": page}, function () { //get content from PHP page\n//            $(\"#overlay\").hide(); //once done, hide loading element\n//            $(\"#ajax_container\").fadeIn();\n//        });\n//    });\n    $(\"body\").on(\"click\", \".nav_btn\", function (e) {\n        $(\".nav_btn\").removeClass(\"bordered-segment\");\n        $(this).addClass(\"bordered-segment\")\n    });\n    setInterval(function () {\n        $(\".new_ticket_label\").toggle();\n    }, 500);\n    setInterval(function () {\n        if ($(\"#hiddenURLNewNotifications\").length) {\n            notifications_url = $(\"#hiddenURLNewNotifications\").val();\n            $.ajax({\n                type: \"GET\",\n                url: notifications_url,\n                success: function (data)\n                {\n                    $(\"#notifications_num_lbl\").html(data);\n                }\n            });\n        }\n\n    }, 30000);\n    setInterval(function () {\n        if ($(\"#hiddenURLStaffTickets\").length) {\n            notifications_url = $(\"#hiddenURLStaffTickets\").val();\n            $.ajax({\n                type: \"GET\",\n                url: notifications_url,\n                success: function (data)\n                {\n                    $(\"#staf_opened_tickets_label\").html(data);\n                }\n            });\n        }\n    }, 30000);\n    $('body').on('change', '#building_report_select', function (e) {\n        e.preventDefault(); // avoid to execute the actual submit of the form.\n        $('#overlay').show();\n        var that = this;\n        var selectedBuilding = $(this).val();\n        var url = $(\"#buildings_url\").val() + \"?buildingID=\" + selectedBuilding;\n        window.location.replace(url);\n    });\n    $('body').on('click', '#add_ticket_link', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        $(document).prop('title', \"تقديم طلب جديد\");\n        $(\"#ajax_container\").hide();\n        var that = this;\n//        $(\"#overlay\").css(\"height\", $(\".col-xs-12\").height());\n        $('#overlay').show();\n        url = $(\"#hiddenURLAddTicket\").val();\n        $.ajax({\n            type: \"GET\",\n            url: url,\n            success: function (data)\n            {\n                $(\".emp_filter_list\").removeClass(\"bordered-segment\");\n                $('#overlay').hide();\n                $(that).addClass(\"bordered-segment\");\n                $(\"#ajax_container\").html(data);\n                $(\"#ajax_container\").fadeIn();\n            }\n        });\n    });\n    $('body').on('click', '.notifications_row', function (e) {\n        var url = $(this).data(\"seenurl\");\n        $.ajax({\n            type: \"GET\",\n            url: url,\n            success: function (data)\n            {\n                $(\"#notifications_num_lbl\").html(data);\n            }\n        });\n    });\n\n    $(\".closebtn\").click(function () {\n        $(\".alert_container\").hide();\n    });\n    function doSomething() {\n        alert(2);\n    };\n    $('body').on('change', '#region_select', function (e) {\n        alert(2);\n        e.preventDefault(); // avoid to execute the actual submit of the form.\n//        $(\"#overlay\").css(\"height\", $(\".col-xs-12\").height());\n        $('#overlay').fadeIn();\n        var url = $(\"#buildings_url\").val() + \"/getBuildings/\" + $(this).val(); // the script where you handle the form input.\n        console.log(url);\n        $.ajax({\n            type: \"GET\",\n            url: url,\n            success: function (json)\n            {\n                console.log(json);\n                $('#building').html(\"\");\n                var buildings = json[\"buildings\"];\n                $.each(buildings, function (i, value) {\n                    console.log(value);\n                    $('#building').append($('<option>').text(value[\"building_name\"]).attr('value', value[\"building_id\"]));\n                });\n                \n                \n            }\n        });\n    });\n    /*Check All Tickets*/\n    $('body').on('click', '#select_all_tickets', function (e) {\n\n        var status = this.checked; // \"select all\" checked status\n        if (this.checked == true) {\n            enableDisableMultipleAction(false);\n            $('.staff_ticket_checkmark').each(function () { //iterate all listed checkbox items\n                this.checked = status; //change \".checkbox\" checked status\n                $(this).closest('tr').addClass(\"checked_row\");\n                selectedTickets.push($(this).val());\n            });\n        } else {\n            enableDisableMultipleAction(true);\n            $('.staff_ticket_checkmark').each(function () { //iterate all listed checkbox items\n                $(this).closest('tr').removeClass(\"checked_row\");\n                this.checked = status; //change \".checkbox\" checked status\n            });\n            selectedTickets = [];\n        }\n        $(\"#selectedTickets\").val(selectedTickets);\n    });\n    /*Check one ticket*/\n    $('body').on('click', '.clickable_tr input', function (e) {\n        e.stopPropagation();\n        if (this.checked == false) { //if this item is unchecked\n            $(this).closest('tr').removeClass(\"checked_row\");\n            enableDisableMultipleAction(true);\n            $(\"#select_all_tickets\")[0].checked = false; //change \"select all\" checked status to false\n        } else {\n            $(this).closest('tr').addClass(\"checked_row\");\n            enableDisableMultipleAction(false);\n        }\n\n        selectedTickets = [];\n        $('input[type=\"checkbox\"][name=\"ticket_checked\"]').each(function () {\n            if ($(this).is(':checked')) {\n                //if checked, Add to selected tickets array\n                selectedTickets.push($(this).val());\n            } else {\n\n            }\n        });\n        $(\"#selectedTickets\").val(selectedTickets);\n        if (selectedTickets.length > 0) {\n//Show selectbox action\n            enableDisableMultipleAction(false);\n        } else {\n            enableDisableMultipleAction(true);\n        }\n    });\n    var enableDisableMultipleAction = function (disabled) {\n//        $(\"#multiple_form_fieldset\").attr(\"disabled\", disabled);\n        if (disabled)\n            $(\"#multiple_action_container\").hide();\n        else\n            $(\"#multiple_action_container\").show();\n    }\n\n    $('body').on('submit', '#multiple_notification_container', function (e) {\n        e.preventDefault();\n        $('#overlay').show();\n        var url = $(\"#submitURL\").val();\n        var notsURL = $(\"#notsURL\").val();\n        if (selectedNotifications.length > 0) {\n\n            $.ajax({\n                type: \"POST\",\n                url: url,\n                data: $(\"#multiple_notification_container\").serialize(), //selectedTickets.serializeArray(),\n                success: function (data)\n                {\n                    $.ajax({\n                        type: \"GET\",\n                        url: notsURL,\n                        success: function (data)\n                        {\n                            $('#overlay').hide();\n                            $(\"#ajax_container\").html(data);\n                            $(\"#ajax_container\").fadeIn();\n                            selectedTickets = [];\n                            enableDisableMultipleActionNotifications(true);\n                            notifications_url = $(\"#hiddenURLNewNotifications\").val();\n                            $.ajax({\n                                type: \"GET\",\n                                url: notifications_url,\n                                success: function (data)\n                                {\n                                    $(\"#notifications_num_lbl\").html(data);\n                                }\n                            });\n                        }\n\n                    });\n                    $('#overlay').hide();\n                }\n            });\n        }\n    });\n    /*Check All notifications*/\n    $('body').on('click', '#all_notifications_checked', function (e) {\n\n        var status = this.checked; // \"select all\" checked status\n        if (this.checked == true) {\n            enableDisableMultipleActionNotifications(false);\n            $('.notifications_checkmark').each(function () { //iterate all listed checkbox items\n                this.checked = status; //change \".checkbox\" checked status\n                $(this).closest('tr').addClass(\"checked_row\");\n                selectedNotifications.push($(this).val());\n            });\n        } else {\n            enableDisableMultipleActionNotifications(true);\n            $('.notifications_checkmark').each(function () { //iterate all listed checkbox items\n                $(this).closest('tr').removeClass(\"checked_row\");\n                this.checked = status; //change \".checkbox\" checked status\n            });\n            selectedNotifications = [];\n        }\n        $(\"#selectedNotifications\").val(selectedNotifications);\n    });\n    /*Check one notification*/\n    $('body').on('click', '.notifications_row input', function (e) {\n        e.stopPropagation();\n        if (this.checked == false) { //if this item is unchecked\n            enableDisableMultipleActionNotifications(true);\n            $(this).closest('tr').removeClass(\"checked_row\");\n            $(\"#all_notifications_checked\").checked = false; //change \"select all\" checked status to false\n        } else {\n            $(this).closest('tr').addClass(\"checked_row\");\n            enableDisableMultipleActionNotifications(false);\n        }\n\n        selectedNotifications = [];\n        $('input[type=\"checkbox\"][name=\"notification_checked\"]').each(function () {\n            if ($(this).is(':checked')) {\n//if checked, Add to selected tickets array\n                selectedNotifications.push($(this).val());\n            } else {\n\n            }\n        });\n        $(\"#selectedNotifications\").val(selectedNotifications);\n        if (selectedNotifications.length > 0) {\n//Show selectbox action\n            enableDisableMultipleActionNotifications(false);\n        } else {\n            enableDisableMultipleActionNotifications(true);\n        }\n    });\n    var enableDisableMultipleActionNotifications = function (disabled) {\n        if (disabled)\n            $(\"#multiple_notification_container\").hide();\n        else\n            $(\"#multiple_notification_container\").show();\n    }\n\n    $('body').on('submit', '#multiple_action_container', function (e) {\n        e.preventDefault();\n        if ($(\"#selected_tickets_select\").val() == 77) {\n            var confirmed = confirm(\"هل تريد فعلا حذف الطلبات التي اخترتها؟\");\n            if (confirmed == false) {\n                return;\n            }\n        }\n        $('#overlay').show();\n        var url = $(\"#submitURL\").val();\n        var redirectURL = $(\"#hiddenURL\").val();\n        var that = $(this);\n        console.log($(that).serialize());\n        if (selectedTickets.length > 0) {\n            $.ajax({\n                type: \"POST\",\n                url: url,\n                data: $(that).serialize(), //selectedTickets.serializeArray(),\n                success: function (data)\n                {\n                    window.location.href = '/home/index/0';\n                }\n            });\n        } else {\n            $.ajax({\n                type: \"POST\",\n                url: url,\n                data: $(\"#add_ticket_form\").serialize(),\n                success: function (data)\n                {\n                    if (data) {\n                        $(\"#ajax_container\").hide();\n                        var that = this;\n                        $.ajax({\n                            type: \"GET\",\n                            url: redirectURL,\n                            success: function (data)\n                            {\n                                $(\".alert_container\").show();\n                                $(\"#add_ticket_link\").removeClass(\"bordered-segment\");\n                                $(\".emp_filter_list\").removeClass(\"bordered-segment\");\n                                $('#overlay').hide();\n                                $(\"#all_tickets_link\").addClass(\"bordered-segment\");\n                                $(\"#ajax_container\").html(data);\n                                $(\"#ajax_container\").fadeIn();\n                            }\n                        });\n                    } else if (data = \"confirmation-false\") {\n                        condole.log(data);\n                        alert(\"حدث خطأ, برجاء المحاولة مرة أخرى\");\n                    }\n                    $('#overlay').hide();\n                }\n            });\n        }\n\n    });\n\n    $('body').on('submit', '#search_form', function (e) {\n        e.preventDefault();\n        var url = $(\"#searchURL\").val();\n        var that = $(\"#term\");\n        $('#overlay').show();\n        $.ajax({\n            type: \"GET\",\n            url: url + \"&term=\" + $(that).val(),\n            success: function (data)\n            {\n                $(\".alert_container\").show();\n                $('#overlay').hide();\n                $(\"#ajax_container\").html(data);\n                $(\"#ajax_container\").fadeIn();\n                $('#overlay').hide();\n                var searchInput = $('#term');\n// Multiply by 2 to ensure the cursor always ends up at the end;\n// Opera sometimes sees a carriage return as 2 characters.\n                var strLength = searchInput.val().length * 2;\n                searchInput.focus();\n                searchInput[0].setSelectionRange(strLength, strLength);\n            }\n        });\n    });\n\n    /*UPLOAD*/\n    var uploaded_files_count = 0;\n    var filesArr = \"\";\n    $('body').on('click', '.btn-upload', function (e) {\n//        e.preventDefault();\n//        var upload_url = $(\"#upload_url\").val();\n//\n//        var fd = new FormData();\n//        var files_data = $('.upload-form .files-data'); // The <input type=\"file\" /> field\n//        var formData = new FormData();\n//        for (var i = 0, len = document.getElementById('file').files.length; i < len; i++) {\n//            formData.append(\"file\" + i, document.getElementById('file').files[i]);\n//        }\n//\n//        formData.append('action', 'cvf_upload_files');\n//        formData.append('upload_dir', $('#upload_dir').val());\n//        $('#overlay').show();\n//        //reset upload counter && empty upload response div\n////        uploaded_files_count = 0;\n////        $(\".upload-response\").html(\"\");\n//        $.ajax({\n//            type: 'POST',\n//            url: upload_url,\n//            data: formData,\n//            contentType: false,\n//            processData: false,\n//            success: function (data)\n//            {\n//                var json;\n//                try {\n//                    json = jQuery.parseJSON(data);\n//                } catch (e) {\n//                    $('#overlay').hide();\n//                    alert(\"خطأ\");\n//                }\n//                if (json.length > 0) {\n//\n//                    $.map(json, function (file) {\n//                        filesArr += file.path + \",\";\n//                        $(\".upload-response\").append(\"<div><a href='#' class='remove_just_uploaded' data-path='\" + file.path + \"'><span style='margin-left: 3px; float:left;' class='glyphicon glyphicon-remove-circle'></span></a><div class='uploaded_file_result_container'><a class='uploaded_file_result_link attach_view' style='float:left; ' href='\" + file.url + \"' target='_blank'><span class='glyphicon glyphicon-paperclip'></span>\" + file.file_name + \"</a></div></div>\");\n//                    });\n//\n//                    $('<input>').attr({\n//                        type: 'hidden',\n//                        class: 'uploaded_files',\n//                        id: 'uploaded_files',\n//                        name: 'uploaded_files',\n//                        value: filesArr\n//                    }).appendTo('#add_ticket_form');\n//                    alert(\"تم رفع \" + json.length + \" ملف بنجاح\");\n//                    $(\"#file\").val('');\n//                    $('#upload_confirm_btn').attr('disabled', true);\n//                    checkTempUploadsFolder();\n//                }\n//                $('#overlay').hide();\n//            },\n//            error: function () {\n//                $('#overlay').hide();\n//                alert(\"خطأ\");\n//                checkTempUploadsFolder();\n//            }\n//        });\n\n    });\n    $('body').on('click', '.remove_just_uploaded', function (e) {\n        e.preventDefault();\n        var that = $(this);\n        $('#overlay').show();\n        url = $(\"#delete_upload_url\").val() + \"?file_path=\" + $(this).data(\"path\");\n        checkDirURL = $(\"#check_temp_uploads_dir\").val();\n        $.ajax({\n            type: 'POST',\n            url: url,\n            success: function (data)\n            {\n                $(that).parent().remove();\n                $(\"#file\").val('');\n                $('#upload_confirm_btn').attr('disabled', true);\n                checkTempUploadsFolder();\n                $('#overlay').hide();\n            },\n            error: function () {\n                $('#overlay').hide();\n                checkTempUploadsFolder();\n                alert(\"خطأ\");\n            }\n        });\n    });\n\n//    $('body').on('change', '#file', function (e) {\n//        var that = $(this);\n//        files = that[0][\"files\"]\n//        if (files.length > 0) {\n//            $('#upload_confirm_btn').attr('disabled', false);\n//        }\n//    });\n    var checkTempUploadsFolder = function () {\n        checkDirURL = $(\"#check_temp_uploads_dir\").val();\n        $.ajax({\n            type: 'GET',\n            url: checkDirURL,\n            success: function (data)\n            {\n                uploaded_files_count = data;\n                if (data == 0) {\n                    filesArr = \"\";\n                    $(\".upload-response\").html(\"\");\n                }\n            }\n        });\n    }\n\n    $('body').on('click', '.attach_view', function () {\n//        e.preventDefault();\n        src = $(this).attr(\"href\");\n        $.fancybox({\n            'width': '100%', // or whatever\n            'height': '100%',\n            'autoDimensions': true,\n            'content': '<embed src=\"' + src + '#nameddest=self&page=1&view=FitH,0&zoom=80,0,0\" height=\"99%\" width=\"100%\" />',\n            'onClosed': function () {\n                $(\"#fancybox-inner\").empty();\n            },\n            afterLoad: function () {\n                this.title = '<a class=\"attach_download_btn\" href=\"' + src + '\" download>تنزيل</a> ';\n            },\n            helpers: {\n                title: {\n                    type: 'inside'\n                }\n            }\n        });\n        return false;\n    });\n});\n\n"]}